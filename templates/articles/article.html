{% load static %}

{% for post in blog_posts %}
    {% if forloop.counter == 1 %}
        <!-- First Article (Unsupervised_Learning) -->
        <article class="post-card post tag-{{ post.tag|slugify }} post-card-large {% if post.featured %}featured{% endif %}">
            <a class="post-card-image-link" href="{% url 'blog_post_detail' post.id %}">
                {% if post.images.first %}
                    <img class="post-card-image" src="{{ post.images.first.image.url }}" alt="{{ post.images.first.alt_text }}" loading="lazy">
                {% else %}
                    <img class="post-card-image" src="{% static 'default.jpg' %}" alt="Default image" loading="lazy">
                {% endif %}
            </a>
            <div class="post-card-content">
                <a class="post-card-content-link" href="{% url 'blog_post_detail' post.id %}">
                    <header class="post-card-header">
                        <div class="post-card-tags">
                            <span class="post-card-primary-tag">{{ post.tag }}</span>
                            {% if post.featured %}<span class="post-card-featured">Featured</span>{% endif %}
                        </div>
                        <h2 class="post-card-title">{{ post.title }}</h2>
                    </header>
                    <div class="post-card-excerpt">{{ post.content|truncatewords:30 }}</div>
                </a>
                <footer class="post-card-meta">
                    <time class="post-card-meta-date" datetime="{{ post.publish_date|date:'Y-m-d' }}">{{ post.publish_date|date:"M d, Y" }}</time>
                    <span class="post-card-meta-length">{{ post.read_time }} min read</span>
                </footer>
            </div>
        </article>
    {% elif forloop.counter == 2 %}
        <!-- Display the third article in the second position (tests) -->
        <article class="post-card post tag-{{ post.tag|slugify }} dynamic">
            <a class="post-card-image-link" href="{% url 'blog_post_detail' post.id %}">
            {% if post.images.first %}
                <img class="post-card-image" src="{{ post.images.first.image.url }}" alt="{{ post.images.first.alt_text }}" loading="lazy">
            {% else %}
                <img class="post-card-image" src="{% static 'default.jpg' %}" alt="Default image" loading="lazy">
            {% endif %}
            </a>
            <div class="post-card-content">
                <a class="post-card-content-link" href="{% url 'blog_post_detail' post.id %}">
                    <header class="post-card-header">
                        <div class="post-card-tags">
                            <span class="post-card-primary-tag">{{ post.tag }}</span>
                        </div>
                        <h2 class="post-card-title">{{ post.title }}</h2>
                    </header>
                    <div class="post-card-excerpt">{{ post.content|truncatewords:30 }}</div>
                </a>
                <footer class="post-card-meta">
                    <time class="post-card-meta-date" datetime="{{ post.publish_date|date:'Y-m-d' }}">{{ post.publish_date|date:"M d, Y" }}</time>
                    <span class="post-card-meta-length">{{ post.read_time }} min read</span>
                </footer>
            </div>
        </article>
        {% elif forloop.counter >= 3 %}
        <!-- Remaining Articles -->
        <article class="post-card post tag-{{ post.tag|slugify }} {% if post.featured %}featured{% endif %}">
            <a class="post-card-image-link" href="{% url 'blog_post_detail' post.id %}">
                {% if post.images.first %}
                    <img class="post-card-image" src="{{ post.images.first.image.url }}" alt="{{ post.images.first.alt_text }}" loading="lazy">
                {% else %}
                    <img class="post-card-image" src="{% static 'default.jpg' %}" alt="Default image" loading="lazy">
                {% endif %}
            </a>
            
            <div class="post-card-content">
                <a class="post-card-content-link" href="{% url 'blog_post_detail' post.id %}">
                    <header class="post-card-header">
                        <div class="post-card-tags">
                            <span class="post-card-primary-tag">{{ post.tag }}</span>
                            {% if post.featured %}
                                <span class="post-card-featured">Featured</span>
                            {% endif %}
                        </div>
                        <h2 class="post-card-title">{{ post.title }}</h2>
                    </header>
                    <div class="post-card-excerpt">{{ post.content|truncatewords:30 }}</div>
                </a>
                <footer class="post-card-meta">
                    <time class="post-card-meta-date" datetime="{{ post.publish_date|date:'Y-m-d' }}">
                        {{ post.publish_date|date:"M d, Y" }}
                    </time>
                    <span class="post-card-meta-length">{{ post.read_time }} min read</span>
                </footer>
            </div>
        </article>
    {% endif %}
    

{% endfor %}
